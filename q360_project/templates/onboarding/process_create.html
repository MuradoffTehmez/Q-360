{% extends "base/base.html" %}
{% load i18n %}

{% block title %}{% trans "Onboarding Prosesi · Yeni" %}{% endblock %}

{% block breadcrumb %}
<nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">{% trans "Əsas Səhifə" %}</a></li>
        <li class="breadcrumb-item"><a href="{% url 'onboarding:dashboard' %}">{% trans "Onboarding" %}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{% trans "Yeni proses" %}</li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-lg-8">
            <h1 class="h3 mb-1">
                <i class="fas fa-play text-primary me-2"></i>{% trans "Yeni onboarding prosesi" %}
            </h1>
            <p class="text-muted mb-0">
                {% trans "İşə yeni qəbul olunan əməkdaş üçün onboarding axını seçin və dərhal start verin." %}
            </p>
        </div>
        <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
            <a href="{% url 'onboarding:dashboard' %}" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-1"></i>{% trans "Geri dön" %}
            </a>
        </div>
    </div>

    <div class="card shadow-sm border-0">
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">{% trans "İşçi" %}</label>
                        <select class="form-select" name="employee">
                            {% for user in employees %}
                            <option value="{{ user.pk }}" {% if selected.employee == user.pk %}selected{% endif %}>
                                {{ user.get_full_name|default:user.username }}
                            </option>
                            {% empty %}
                            <option value="">{% trans "Aktiv istifadəçi yoxdur" %}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">{% trans "Şablon" %}</label>
                        <select class="form-select" name="template">
                            {% for tmpl in templates %}
                            <option value="{{ tmpl.pk }}" {% if selected.template == tmpl.pk %}selected{% endif %}>
                                {{ tmpl.name }}
                            </option>
                            {% empty %}
                            <option value="">{% trans "Əvvəlcə şablon yaradın" %}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">{% trans "Başlama tarixi" %}</label>
                        <input type="date" name="start_date" value="{{ selected.start_date }}" class="form-control">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">{% trans "Məsul şəxs" %}</label>
                        <select class="form-select" name="created_by">
                            <option value="{{ request.user.pk }}" selected>{{ request.user.get_full_name|default:request.user.username }}</option>
                        </select>
                    </div>
                </div>

                <div class="alert alert-info mt-4 mb-4">
                    <div class="d-flex">
                        <i class="fas fa-question-circle me-3"></i>
                        <div>
                            <strong>{% trans "Avtomatik tapşırıqlar" %}</strong>
                            <p class="text-muted small mb-0">
                                {% trans "Proses yaradıldıqdan sonra şablonun bütün tapşırıqları əməkdaşa və HR komandasına avtomatik təyin olunacaq." %}
                            </p>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-check me-1"></i>{% trans "Prosesi başlat" %}
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
